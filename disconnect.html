<html>
<head>
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400">  <!-- Google web font "Open Sans" -->
	<link rel="stylesheet" href="css/fontawesome-all.min.css"> <!-- Icons -->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/tooplate-style.css">
	<link rel="stylesheet" href="css/styles.css">
	<link rel="stylesheet" href="css/disconnect.css">

	<title>Прекъсване на връзка</title>

	<link rel="icon" href="img/icon.png">

	<style>
		#fig-1 {
		  width: 65%;
		}
	</style>
</head>
<body>

	<div class="row">

		<div id="tmSideBar" class="col-xl-3 col-lg-4 col-md-12 col-sm-12 sidebar">

			<button id="tmMainNavToggle" class="menu-icon">&#9776;</button>

			<div class="inner">

				<h1><b>TPC/UDP</b></h1>

				<nav id="tmMainNav" class="tm-main-nav">
					<ul>
						<li>
							<a href="index.html">
								<i class="fas fa-home tm-nav-fa-icon"></i>
								<span>Начало</span>
							</a>
						</li>
						<li>
							<a href="main_info.html" >
								<i class="fas fa-star tm-nav-fa-icon"></i>
								<span>Основна информация</span>
							</a>
						</li>
						<li>
							<a href="connect.html" >
								<i class="fas fa-plug tm-nav-fa-icon"></i>
								<span>Установяване на връзка</span>
							</a>
						</li>
						<li>
							<a href="transfer.html" >
								<i class="fas fa-exchange-alt tm-nav-fa-icon"></i>
								<span>Пренос на данни</span>
							</a>
						</li>
						<li>
							<a href="disconnect.html" class="active">
								<i class="fas fa-unlink tm-nav-fa-icon"></i>
								<span>Прекъсване на връзка</span>
							</a>
						</li>
						<li>
							<a href="more_info.html" >
								<i class="fas fa-info-circle tm-nav-fa-icon"></i>
								<span>Допълнителна информация</span>
							</a>
						</li>
						<li>
							<a href="sources.html" >
								<i class="fas fa-book tm-nav-fa-icon"></i>
								<span>Източници</span>
							</a>
						</li>
					</ul>
				</nav>
			</div>
		</div> <!-- end of sidebar with nav -->

		<section id="pageContent" class="col-xl-8 col-lg-8 col-md-12 col-sm-12">
			<h1 class="main-header">Прекъсване на връзка</h1>

			<p>&emsp;Прекратяването на връзка между две страни следва подобен, но по-сложен, подход от установяването й. Това е поради факта, че двете страни трябва успешно да освободят ресурси. Стандартният начин за прекратяване е чрез двойка FIN пакети.</p>

			<ul>
				<li>Машина 1 изпраща FIN пакет към Машина 2 (възможно е да бъдат изпратени и данни) и чака да получи FIN пакет. Времето, през което чака, се нарича FIN WAIT. През това време е възможно да започне освобождаването на ресурси.</li>
				<li>Машина 2 получава FIN пакета и връща веднага ACK пакет. Започва да освобождава ресурси и при приключване изпраща също FIN пакет към Машина 1. Това време се нарича Close Wait.</li>

				<section class="note_panel row">

					<div class="col-xl-2 col-lg-2 col-md-3 col-sm-3" >
						<img src="img/note.png" class="note-img" />
					</div>

					<div class="col-xl-10 col-lg-10 col-md-9 col-sm-9 note">
						<h3>Бележка</h3>
						<p>По време на Close Wait Машина 1 е прекратила само изпращането, но не и получаването на данни. Трансфера на информация от Машина 2 към Машина 1 се поддържа докато и двете страни не изпратят FIN пакет.</p>
					</div>
				</section>

				<li>След като Машина 2 изпрати своя FIN пакет, чака да получи ACK пакет от Машина 1 – Last Ack Wait.</li>
				<li>Машина 1 получава FIN пакета и изпраща ACK пакет обратно. Вече може да освободи всички оставащи ресурси, но трябва да изчака още (определен timeout), защото има вероятност да се наложи да изпрати ACK пакета повторно.</li>
				<li>Машина 2 получава ACK пакета и окончателно може да терминира връзката.</li>
			</ul>

			<div id="fig-1" class="figure">
				<img src="img/disconn-tcp.png" />
				<span>Фиг. 1 Прекъсване на връзка при TCP.</span>
			</div>

			<section class="more_info_panel row">

				<div class="col-xl-2 col-lg-2 col-md-3 col-sm-3" >
					<img src="img/info.png" class="info-img" />
				</div>

				<div class="col-xl-10 col-lg-10 col-md-9 col-sm-9 more_info">
					<h3>Допълнителна информация</h3>
					<button onclick="window.location='headers.html'" type="button" class="btn btn-info btn-lg">Служебните данни</button>
				</div>
			</section>

		</section>
	</div> <!-- End of row div -->


	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script></body>

</html>
